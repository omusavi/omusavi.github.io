<!DOCTYPE html>
<html lang=en>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="VSTS recently added the Wiki feature - an integrated wiki backed by Git that allows people to check in Markdown files view them in their VSTS instance. This works great for storing documentation for p">
<meta name="keywords" content="vsts,wiki">
<meta property="og:type" content="article">
<meta property="og:title" content="Deleting Project Wiki from VSTS">
<meta property="og:url" content="http://omusavi.github.io/2018/05/07/Deleting-Project-Wiki-from-VSTS/index.html">
<meta property="og:site_name" content="Omeed&#39;s Dev Blog">
<meta property="og:description" content="VSTS recently added the Wiki feature - an integrated wiki backed by Git that allows people to check in Markdown files view them in their VSTS instance. This works great for storing documentation for p">
<meta property="og:locale" content="en">
<meta property="og:image" content="http://omusavi.github.io/2018/05/07/Deleting-Project-Wiki-from-VSTS/create-new-wiki.PNG">
<meta property="og:updated_time" content="2018-05-17T18:04:31.071Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Deleting Project Wiki from VSTS">
<meta name="twitter:description" content="VSTS recently added the Wiki feature - an integrated wiki backed by Git that allows people to check in Markdown files view them in their VSTS instance. This works great for storing documentation for p">
<meta name="twitter:image" content="http://omusavi.github.io/2018/05/07/Deleting-Project-Wiki-from-VSTS/create-new-wiki.PNG">
    
    
    <!-- title -->
    <title>Deleting Project Wiki from VSTS</title>
    <!-- styles -->
    <link rel="stylesheet" href="/css/style.css">
    <!-- persian styles -->
    
      <link rel="stylesheet" href="/css/rtl.css">
    
    <!-- rss -->
    
    
</head>

<body class="max-width mx-auto px3 ltr">    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="http://github.com/omusavi">Projects</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://omusavi.github.io/2018/05/07/Deleting-Project-Wiki-from-VSTS/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://omusavi.github.io/2018/05/07/Deleting-Project-Wiki-from-VSTS/&text=Deleting Project Wiki from VSTS"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://omusavi.github.io/2018/05/07/Deleting-Project-Wiki-from-VSTS/&title=Deleting Project Wiki from VSTS"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://omusavi.github.io/2018/05/07/Deleting-Project-Wiki-from-VSTS/&is_video=false&description=Deleting Project Wiki from VSTS"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Deleting Project Wiki from VSTS&body=Check out this article: http://omusavi.github.io/2018/05/07/Deleting-Project-Wiki-from-VSTS/"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://omusavi.github.io/2018/05/07/Deleting-Project-Wiki-from-VSTS/&title=Deleting Project Wiki from VSTS"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://omusavi.github.io/2018/05/07/Deleting-Project-Wiki-from-VSTS/&title=Deleting Project Wiki from VSTS"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://omusavi.github.io/2018/05/07/Deleting-Project-Wiki-from-VSTS/&title=Deleting Project Wiki from VSTS"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://omusavi.github.io/2018/05/07/Deleting-Project-Wiki-from-VSTS/&title=Deleting Project Wiki from VSTS"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://omusavi.github.io/2018/05/07/Deleting-Project-Wiki-from-VSTS/&name=Deleting Project Wiki from VSTS&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Getting-Started"><span class="toc-number">1.</span> <span class="toc-text">Getting Started</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Get-Personal-Access-Token"><span class="toc-number">2.</span> <span class="toc-text">Get Personal Access Token</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Generate-Authorization-Header"><span class="toc-number">3.</span> <span class="toc-text">Generate Authorization Header</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Get-Repo-ID"><span class="toc-number">4.</span> <span class="toc-text">Get Repo ID</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Delete-Repo"><span class="toc-number">5.</span> <span class="toc-text">Delete Repo</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Conclusion"><span class="toc-number"></span> <span class="toc-text">Conclusion</span></a>
    </div>
  </span>
</div>

    
    <div class="content index my4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        Deleting Project Wiki from VSTS
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">Omeed's Dev Blog</span>
      </span>
      
    <div class="postdate">
        <time datetime="2018-05-07T17:06:25.000Z" itemprop="datePublished">2018-05-07</time>
    </div>


      
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link" href="/tags/vsts/">vsts</a>, <a class="tag-link" href="/tags/wiki/">wiki</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <p>VSTS recently <a href="https://docs.microsoft.com/en-us/vsts/collaborate/wiki-create-repo?view=vsts" target="_blank" rel="noopener">added the Wiki</a> feature - an integrated wiki backed by Git that allows people to check in Markdown files view them in their VSTS instance. This works great for storing documentation for products or teams right into the repo so that it sits with the code.</p>
<p>Prior to them <a href="https://blogs.msdn.microsoft.com/devops/2018/03/25/announcement-publish-markdown-files-from-your-git-repository-to-vsts-wiki/" target="_blank" rel="noopener">adding support for publishing from any arbitrary git repo</a>, you had a single wiki created (named the same as your VSTS project with .wiki appended). Now that you can have multiple wikis in the same VSTS project, this presents a problem where you may not want a default Project wiki and instead rely only on files that are checked into your normal git repo.</p>
<p>Unfortunately, it is currently not possible to delete a project wiki using the VSTS UI. You can <a href="https://docs.microsoft.com/en-us/vsts/collaborate/wiki-select-unpublish-versions?view=vsts#unpublish-a-published-wiki" target="_blank" rel="noopener">unpublish a wiki</a> that you published via a git repo, but this is not possible with the Project wiki (here is a full list of all the <a href="https://docs.microsoft.com/en-us/vsts/collaborate/provisioned-vs-published-wiki?view=vsts" target="_blank" rel="noopener">differences between the project and published wikis</a>)</p>
<p><img src="create-new-wiki.PNG" alt="Accidentally click on this link? There is no way to undo!"><span class="image-caption">Accidentally click on this link? There is no way to undo!</span></p>
<p>This tutorial guides you through deleting a Project wiki using the VSTS REST APIs so that when clicking on the Wiki link, you are directed to the first published wiki.</p>
<h2 id="Getting-Started"><a href="#Getting-Started" class="headerlink" title="Getting Started"></a>Getting Started</h2><p>For this tutorial you will need the following things:</p>
<ul>
<li>Permissions to delete repositories on your VSTS instance</li>
<li>Fiddler, Postman, cURL or similar tool to make HTTP calls</li>
</ul>
<h2 id="Get-Personal-Access-Token"><a href="#Get-Personal-Access-Token" class="headerlink" title="Get Personal Access Token"></a>Get Personal Access Token</h2><p>In order to utilize the VSTS REST APIs, you will first need to get a Personal Access Token that you will then use to generate an authorization header.</p>
<ol>
<li>Open a browser window to your VSTS project</li>
<li>Hover over your profile image in the top right corner and select Security</li>
<li>In the <code>Personal Access Tokens</code> section, click the Add button. Give it an appropriate description (like “VSTS Rest API token”) and give it permissions to <code>Code (read, write, manage)</code>.</li>
<li>Save the access token that is generated in a safe place for future use</li>
</ol>
<h2 id="Generate-Authorization-Header"><a href="#Generate-Authorization-Header" class="headerlink" title="Generate Authorization Header"></a>Generate Authorization Header</h2><p>The authorization header is what we will use to authenticate in our REST calls. VSTS APIs use a Base64 encoded string as the authorization header, so we need to generate that. Fiddler actually has this built in, but there are also plenty of sites that will do the base64 encoding for you.</p>
<p>The format of the input for the encoding is: <code>&lt;username&gt;:&lt;personal access token&gt;</code></p>
<p>In this case, <code>&lt;username&gt;</code> can be anything you want. For example, if your personal access token was <code>xqdktnq3welqcverk65kd77oxcc33x5xjn2af2w56g4yllpynfgq</code>, you would get the following:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: omeed:xqdktnq3welqcverk65kd77oxcc33x5xjn2af2w56g4yllpynfgq</span><br><span class="line">Output: b21lZWQ6eHFka3RucTN3ZWxxY3Zlcms2NWtkNzdveGNjMzN4NXhqbjJhZjJ3NTZnNHlsbHB5bmZncQ==</span><br></pre></td></tr></table></figure>
<h2 id="Get-Repo-ID"><a href="#Get-Repo-ID" class="headerlink" title="Get Repo ID"></a>Get Repo ID</h2><p>To delete the wiki, we are actually going to delete the Git repo that is backing it. Unfortunately, we can not go through the normal git repo UI as the wiki repo is hidden, so we need to get some more information about it and then call the rest APIs to delete it.</p>
<p>For this, we just need to make a REST call to the <a href="https://docs.microsoft.com/en-us/rest/api/vsts/git/repositories/list?view=vsts-rest-4.1" target="_blank" rel="noopener">Repositories List API</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GET https://&#123;accountName&#125;.visualstudio.com/&#123;project&#125;/_apis/git/repositories?api-version=4.1&amp;includeHidden=true</span><br></pre></td></tr></table></figure>
<p>There are 2 important parts to this HTTP call:</p>
<ol>
<li>The <code>includeHidden</code> flag in the API call is required or the wiki will not be returned.</li>
<li>Make sure to include the Authorization header in the GET request. The format of that is: <code>Authorization: Basic &lt;Base64 Encoded Authorization Header&gt;</code></li>
</ol>
<p>If you got a 200 OK HTTP response, then that means it worked! You can now look at the JSON response and one of the repos be the wiki repo (the Project wiki’s <code>name</code> property will be in the format <code>&lt;VSTS Project Name&gt;.wiki&gt;</code>)</p>
<p>Make a note of the <code>url</code> property of the repository, which is made up of your VSTS url and the repository ID.</p>
<h2 id="Delete-Repo"><a href="#Delete-Repo" class="headerlink" title="Delete Repo"></a>Delete Repo</h2><p>Our final step is to use the <code>url</code> we retrieved from the repository list and to build our <a href="https://docs.microsoft.com/en-us/rest/api/vsts/git/repositories/delete?view=vsts-rest-4.1" target="_blank" rel="noopener">final REST call</a>:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DELETE https://&#123;accountName&#125;.visualstudio.com/&#123;project&#125;/_apis/git/repositories/&#123;repositoryId&#125;?api-version=4.1</span><br></pre></td></tr></table></figure>
<p>You can write the Url above yourself, or just use the url we got from the previous step. Make sure to add the <code>api-version</code> to the end of the URL. Some things to note:</p>
<ol>
<li>Make sure you are making a DELETE call and not GET or POST</li>
<li>Don’t forget to add the authorization header to the call just like the previous step</li>
</ol>
<p>If you get a <code>204 No Content</code> that means the resource has been successfully deleted.</p>
<h1 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h1><p>And that’s it! If you go to the Wiki link in VSTS, you will be directed to the first published wiki, or if no other wikis were published, just the default page.</p>

  </div>
</article>

    <div class="blog-post-comments">
        <div id="disqus_thread">
            <noscript>Please enable JavaScript to view the comments.</noscript>
        </div>
    </div>



    </div>
    
      <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="http://github.com/omusavi">Projects</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Getting-Started"><span class="toc-number">1.</span> <span class="toc-text">Getting Started</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Get-Personal-Access-Token"><span class="toc-number">2.</span> <span class="toc-text">Get Personal Access Token</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Generate-Authorization-Header"><span class="toc-number">3.</span> <span class="toc-text">Generate Authorization Header</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Get-Repo-ID"><span class="toc-number">4.</span> <span class="toc-text">Get Repo ID</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Delete-Repo"><span class="toc-number">5.</span> <span class="toc-text">Delete Repo</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Conclusion"><span class="toc-number"></span> <span class="toc-text">Conclusion</span></a>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://omusavi.github.io/2018/05/07/Deleting-Project-Wiki-from-VSTS/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://omusavi.github.io/2018/05/07/Deleting-Project-Wiki-from-VSTS/&text=Deleting Project Wiki from VSTS"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://omusavi.github.io/2018/05/07/Deleting-Project-Wiki-from-VSTS/&title=Deleting Project Wiki from VSTS"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://omusavi.github.io/2018/05/07/Deleting-Project-Wiki-from-VSTS/&is_video=false&description=Deleting Project Wiki from VSTS"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Deleting Project Wiki from VSTS&body=Check out this article: http://omusavi.github.io/2018/05/07/Deleting-Project-Wiki-from-VSTS/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://omusavi.github.io/2018/05/07/Deleting-Project-Wiki-from-VSTS/&title=Deleting Project Wiki from VSTS"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://omusavi.github.io/2018/05/07/Deleting-Project-Wiki-from-VSTS/&title=Deleting Project Wiki from VSTS"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://omusavi.github.io/2018/05/07/Deleting-Project-Wiki-from-VSTS/&title=Deleting Project Wiki from VSTS"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://omusavi.github.io/2018/05/07/Deleting-Project-Wiki-from-VSTS/&title=Deleting Project Wiki from VSTS"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://omusavi.github.io/2018/05/07/Deleting-Project-Wiki-from-VSTS/&name=Deleting Project Wiki from VSTS&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> Share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>

    
    <footer id="footer">
  <div class="footer-left">
    Copyright &copy; 2018 Omeed Musavi
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="http://github.com/omusavi">Projects</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

</body>
</html>
<!-- styles -->
<link rel="stylesheet" href="/lib/font-awesome/css/fontawesome-all.min.css">
<link rel="stylesheet" href="/lib/justified-gallery/css/justifiedGallery.min.css">

<!-- jquery -->
<script src="/lib/jquery/jquery.min.js"></script>
<script src="/lib/justified-gallery/js/jquery.justifiedGallery.min.js"></script>
<script src="/js/main.js"></script>
<!-- search -->

<!-- Google Analytics -->

<!-- Baidu Analytics -->

<!-- Disqus Comments -->

    <script type="text/javascript">
        var disqus_shortname = 'omusavi';

        (function(){
            var dsq = document.createElement('script');
            dsq.type = 'text/javascript';
            dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        }());
    </script>


